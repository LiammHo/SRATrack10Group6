---
title: "collecting_enviromental_data"
author: "Katie Wang"
date: "2024-07-11"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#loading in the packages :D
library(tidyverse)
library(sdmpredictors)
library(raster)
library(sp)
library(terra)
library(sf)
```

```{r}
#listing all of the different variables 
library(biooracler)

dataset <- list_layers()
dataset
```

```{r}
latitude = c(-89.975, 89.975)
longitude = c(-179.975, 179.975)
constraints = list(latitude, longitude)
names(constraints) = c("latitude", "longitude")
```

```{r}
#importing the max ocean temperature
dataset_id <- "thetao_baseline_2000_2019_depthmax"
variables = c("thetao_mean") #choosing the mean of the max temperature 
max_ocean_temp <- download_layers(dataset_id, variables, constraints)
```

```{r}
#importing the mean ocean temperature
dataset_id1 <- "thetao_baseline_2000_2019_depthmean"
variables = c("thetao_mean") #choosing the mean of the mean temperature 
mean_ocean_temp <- download_layers(dataset_id1, variables, constraints)
```

```{r}
#importing the min ocean temperature 
dataset_id2 <- "thetao_baseline_2000_2019_depthmin"
variables = c("thetao_mean") #choosing the mean of the min temperature 
min_ocean_temp <- download_layers(dataset_id2, variables, constraints)
```

```{r}
#importing the mean salinity
dataset_id3<- "so_baseline_2000_2019_depthmean"
variables = c("so_mean") #choosing the mean of salinity
salinity <- download_layers(dataset_id3, variables, constraints)
```

```{r}
#importing the mean TotalPhytoplankton
dataset_id4 <- "phyc_baseline_2000_2020_depthmean"
variables = c("phyc_mean") #choosing the mean of TotalPhytoplankton <- can be rep of primary productivity
totalphytoplankton <- download_layers(dataset_id4, variables, constraints)
```

```{r}
#importing the mean pH
dataset_id5 <- "ph_baseline_2000_2018_depthmean"
variables = c("ph_mean") #choosing the mean of pH
ph <- download_layers(dataset_id5, variables, constraints)
```

```{r}
#importing the mean chlorophyll
dataset_id6 <- "chl_baseline_2000_2018_depthmean"
variables = c("chl_mean") #choosing the mean of chlorophyll
chlorophyll <- download_layers(dataset_id6, variables, constraints)
```

```{r}
#importing the MixedLayerDepth
dataset_id7 <- "mlotst_baseline_2000_2019_depthsurf"
variables = c("mlotst_mean") #choosing the mean of MixedLayerDepth
mixedlayerdepth <- download_layers(dataset_id7, variables, constraints)
```

Can plot(variable) <- to see the current data

----------------------------------------------------------------------------------------------

```{r}
#making an empty shape file to push stuff into
library(sf)
nrows <- 10
data <- st_sf(id = 1:nrows, geometry = st_sfc(lapply(1:nrows, function(x) st_geometrycollection())))
```

```{r}
#setting the coordinate system of the empty shape file to be the same
all_data = data %>%
  st_set_crs("WGS84")

#reading in the manta ray shape rile 
manta_data <- st_read("Data/manta_crs.shp") %>%
  st_set_crs("WGS84")
```

```{r}
#setting the max ocean temp crs to be the same
max_temp <- project(max_ocean_temp,
                                 crs(manta_data))

max_temp1 = terra::extract(x = max_temp,y = manta_data)
```


